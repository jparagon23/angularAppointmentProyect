<div class="container mx-auto p-6 bg-gray-50 rounded-lg shadow-lg">
  <!-- Título de la sección -->
  <div class="text-3xl font-semibold text-center text-black mb-8">
    Publicar resultado
  </div>

  <div class="mb-6">
    <label
      for="match-date"
      class="block text-lg font-medium text-gray-700 mb-2"
    >
      Fecha del Partido
    </label>
    <app-date-selector
      [initialDate]="matchDate"
      [minDate]="'1900-01-01'"
      [maxDate]="'2100-12-31'"
      (dateSelected)="onDateChange($event)"
    ></app-date-selector>
  </div>

  <!-- Sección del Jugador 1 -->
  <div>
    <!-- Foto de perfil -->
    <app-user-card
      [user]="player1"
      [index]="1"
      [winner]="winner === 'player1' ? true : false"
    ></app-user-card>
  </div>

  <!-- Sección de sets y games -->
  <app-set-result-component
    (resultEmitter)="handleResult($event)"
  ></app-set-result-component>

  <!-- Sección de búsqueda y selección del Jugador 2 -->
  <div>
    <div *ngIf="!player2" class="p-4 bg-white rounded-lg shadow-md mb-6">
      <label
        for="search-player"
        class="block text-lg font-medium text-gray-700 mb-2"
      >
        Buscar Jugador 2
      </label>
      <input
        id="search-player"
        type="text"
        [(ngModel)]="searchTerm"
        placeholder="Buscar jugador..."
        class="w-full h-12 p-3 border-2 border-gray-300 rounded-md focus:outline-none focus:border-blue-500"
        (input)="onSearch()"
      />

      <!-- Mostrar la lista de jugadores solo cuando el usuario comience a escribir -->
      <ul
        *ngIf="searchTerm && filteredPlayers.length > 0"
        class="mt-4 max-h-40 overflow-y-auto"
      >
        <li
          *ngFor="let player of filteredPlayers"
          (click)="selectPlayer(player)"
          class="cursor-pointer p-2 hover:bg-gray-200 rounded"
        >
          <div class="flex items-center space-x-4">
            <img
              [src]="player.image"
              alt="{{ player.name }}"
              class="w-12 h-12 rounded-full object-cover"
            />
            <p>{{ player.name }}</p>
          </div>
        </li>
      </ul>
    </div>

    <!-- Mostrar tarjeta del Jugador 2 cuando se selecciona -->
    <div *ngIf="player2" class="mt-4">
      <app-user-card
        [user]="player1"
        [index]="2"
        [winner]="winner === 'player2' ? true : false"
      ></app-user-card>
    </div>
  </div>

  <!-- Botón para publicar el resultado -->
  <div class="flex justify-center mt-5">
    <button
      class="px-8 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-all duration-200"
      (click)="publishResult()"
    >
      Publicar resultado
    </button>
  </div>
</div>
